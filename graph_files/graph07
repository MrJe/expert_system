A ^ (B | C) + D => E    # A B C | D + ^
X               => A
Y               => X
Z               => Y
F + G | H + I   => Z    # F G + H I + |
J ^ K ^ L | M   => D    # J K ^ L ^ M |
N               => M
O               => N
P + Q           => O    # P Q +

=PQ

?E

# E -> ^ -> + -> D -> | -> M -> N -> O -> + -> Q
#                                           -> P
#                       -> ^ -> L
#                            -> ^ -> K
#                                 -> J
#             -> | -> C
#                  -> B
#        -> A -> X -> Y -> Z -> | -> + -> I
#                                      -> H
#                                 -> + -> G
#                                      -> F
